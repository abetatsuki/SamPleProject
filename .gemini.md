# GEMINI.md

## Purpose

This document defines **strict, mandatory rules** for generating and modifying
C# code in this project (Unity focused).

These rules exist to ensure:
- Deterministic code structure
- Correct Unity lifecycle ordering
- Explicit intent and readability
- Verification that this file was actually read

All rules below are **non-optional**.

---

## Mandatory Pre-Analysis Rule (READ FIRST)

Before generating or modifying any code:

1. List all C# files under `Assets/ActionSample`.
2. Read key files to understand:
    - Architecture
    - Coding conventions
    - Design intent
3. Decide what changes are appropriate **based on existing code**.

❌ Do NOT generate or modify code before this analysis is complete.

---

## Terminology Definitions (CRITICAL)

To avoid ambiguity, the following definitions apply:

- **Field**: a class member declared with a variable type (e.g. `int`, `float`)
- **Property**: a C# property with `get` / `set`
- **Public Variable (ORDERING TERM)**:
    - Means **public property only**
    - Public fields are forbidden

⚠️ For ordering purposes, **public properties are treated as public variables**.

---

## Code Structure Order (STRICT)

All classes **must follow this exact order**:

1. Constructor
2. **Public properties (capsulated access only)**
3. Public Unity lifecycle methods  
   (`Awake`, `OnEnable`, `Start`, `Update`, etc.)
4. Public methods
5. **Private fields**
6. Private Unity lifecycle methods
7. Private methods

⚠️ Public properties must **NEVER** appear after private fields.  
⚠️ Private fields must **NEVER** appear above public properties.

---

## Visibility & Encapsulation Rules

- ❌ Public fields are NOT allowed
- ✅ All public access must be through properties
- Private fields:
    - Must start with `_`
- Public properties:
    - Must start with an uppercase letter

Example:

```csharp
private int _currentAmmo;

public int CurrentAmmo
{
    get { return _currentAmmo; }
    private set { _currentAmmo = value; }
}
